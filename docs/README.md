# 크리스마스 프로모션

우테코 식당 12월 이벤트 플래너를 개발한다.

## 기능 요구 사항

### 미리보기

```
안녕하세요! 우테코 식당 12월 이벤트 플래너입니다.
12월 중 식당 예상 방문 날짜는 언제인가요? (숫자만 입력해 주세요!)
26
주문하실 메뉴를 메뉴와 개수를 알려 주세요. (e.g. 해산물파스타-2,레드와인-1,초코케이크-1)
타파스-1,제로콜라-1
12월 26일에 우테코 식당에서 받을 이벤트 혜택 미리 보기!

<주문 메뉴>
타파스 1개
제로콜라 1개

<할인 전 총주문 금액>
8,500원

<증정 메뉴>
없음

<혜택 내역>
없음

<총혜택 금액>
0원

<할인 후 예상 결제 금액>
8,500원

<12월 이벤트 배지>
없음
```

### 명세

#### UI

* 식당 예상 방문 날짜를 입력 받는다.
    * 예외 처리 - 추가 예정
* 주문할 메뉴와 수량을 입력 받는다.
    * 예외 처리 - 추가 예정
* 처리 결과를 출력한다.
    * 주문 내역을 출력한다.
    * 할인 전 총 주문 금액을 출력한다.
    * 증정 메뉴를 출력한다.
    * 혜택 내역을 출력한다.
    * 총 혜택 금액을 출력한다.
    * 할인 후 예상 결제 금액을 출력한다.
    * 12월 이벤트 배지를 출력한다.

#### 비즈니스 로직

* 조건에 따라 할인 금액의 로직을 가진다.
    * 공통 - 할인 전 총 금액이 10000원 이상이어야 적용된다.
* 식당 방문 날짜와 주문 메뉴가 주어지면:
    * 주문 내역을 저장한다.
    * 주문 총액을 계산한다.
    * 혜택을 계산한다.
        * 크리스마스 디데이 할인 금액을 계산한다.
        * 평일 할인 금액을 계산한다.
        * 주말 할인 금액을 계산한다.
        * 특별 할인을 계산한다.
        * 증정 이벤트를 계산한다. (혜택으로 간주하지만 할인 총액에서 제함에 유의)
    * 총 혜택 금액을 계산한다.
    * 혜택 금액에 따라 뱃지를 부여한다.

---

# 클래스 디자인 / TODO

## Model

### EventPlanner

* 최초 개발 - 리팩토링 염두에 두고 통자로 개발한다
* [x] 예약 일자를 저장한다
    * [ ] 검증 로직을 구현한다.
        * 2023년 12월인지 확인한다.
* [x] 주문 내역을 저장한다
    * [x] 주문 내역을 저장한다
        * [ ] 검증 로직을 구현한다.
            * 개별 메뉴 항목에 대한 검증은 제외한다.
            * 메뉴 목록에 메뉴가 존재하는지 확인한다.
            * 중복 메뉴가 있는지 확인한다.
            * 음료만 주문되었는지 확인한다.
            * 메뉴의 총 수량이 20개를 초과하는지 확인한다.
    * [x] 주문 내역을 반환한다
* [x] 주문 총액을 계산한다
    * [x] 주문 총액을 계산한다
    * [x] 주문 총액을 반환한다
* [ ] 혜택을 계산한다
    * [ ] 크리스마스 디데이 할인 금액을 계산한다
    * [ ] 평일 할인 금액을 계산한다
    * [x] 주말 할인 금액을 계산한다
    * [ ] 특별 할인을 계산한다
    * [x] 증정 이벤트를 계산한다
    * [x] 혜택 총액을 계산한다
    * [x] 할인에 따른 결제 금액을 계산한다
    * [x] 혜택 내역을 반환한다
    * [x] 혜택 금액에 따라 뱃지를 부여한다

## Controller - EventPlannerController

* [x] UI로부터 입력을 받아 도메인으로 전달한다.
    * UI로부터 입력을 (DTO 형태로 포장해) 받는다.
    * 입력을 (형식 레벨에서) 검증하고 (DTO로 포장해) 파싱한다
    * (DTO를) 도메인에 전달한다
    * [x] 받아야 할 내용
        * [x] 방문 날짜
        * [x] 주문 메뉴
    * [x] 추가: 예외 발생 시 다시 입력받는다. (다시 입력 로직의 책임은 View가 아닌 Controller가 담당)
* [x] 도메인으로부터 결과를 받아 UI로 전달한다
    * [x] 도메인으로부터 결과를 받는다
    * [x] UI 레이어에 그대로 보낸다
    * [x] exception 발생 시 출력 후 재시작한다.

### TryUntilSuccess

* [x] 메서드와 뷰를 받는다.
* [x] 메서드를 실행하고, 예외 발생 시 메시지를 출력하고 다시 실행한다.

## Parser

### Parser(interface)

* [x] 인터페이스를 정의한다.

### DayDateParser

* [x] IO 인터페이스를 구현한다.
    * [x] Calendar 형태로 리턴한다.
    * [ ] validate를 구현한다.
        * 정수형(decimal)이다.
        * 1~31 사이이다.

### OrderParser

* [x] 인터페이스를 정의한다.
    * [x] Map 형태로 리턴한다.
    * [ ] validate를 구현한다.
        * 메뉴명 - 정수

## View

### io.IO

* [x] 인터페이스를 정의한다.

### io.ConsoleIO

* [x] IO 인터페이스를 구현한다.

### InputView

* [x] 방문 날짜를 입력 받는다
    * [x] 방문 날짜를 입력 받는다
    * [x] 입력 받은 방문 날짜를 (DTO로 포장해) 반환한다
* [x] 주문 메뉴를 입력 받는다
    * [x] 주문 메뉴를 입력 받는다
    * [x] 입력 받은 주문 메뉴를 (DTO로 포장해) 반환한다

### OutputView

* [x] 타이틀 등 Magic Literal을 출력한다
* [x] 주문 내역을 출력한다
* [x] 할인 전 총 주문 금액을 출력한다
* [x] 혜택 내역을 출력한다
* [x] 총 혜택 금액을 출력한다
* [x] 할인 후 예상 결제 금액을 출력한다
* [x] 12월 이벤트 배지를 출력한다